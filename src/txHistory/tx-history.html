<template>
  <div class="txHistory">
    <div class="title">Transaction History</div>
    <div class="heading1">A history of your transactions using this PrimeDAO Pool Manager</div>
    <div class="body">

      <div if.to-view="!connected" class="connectButton">
        <button class="button1" click.delegate="connect()">Connect to view your transactions</button>
      </div>

      <div else>
        <div if.to-view="loading" class="loading">
          <i class="fas fa-circle-notch fa-spin"></i>
        </div>

        <div else class="grid">
          <div class="columnHeader">Pool</div>
          <div class="columnHeader">Date</div>
          <div class="columnHeader">Type</div>
          <div class="columnHeader">Assets In</div>
          <div class="columnHeader">Assets Out</div>
          <div class="columnHeader">Etherscan</div>

          <template repeat.for="tx of transactions">
            <div class="cell">${tx.poolName}</div>
            <div class="cell">${tx.date | date:"table-datetime"}</div>
            <div class="cell">${tx.actionDescription}</div>
            <div class="cell">
              <div class="assets" repeat.for="action of tx.assetsIn">
                <div class="amount">${action.amount}</div>
                <div class="name">${action.name}</div>
              </div>
            </div>
            <div class="cell">
              <div class="assets" repeat.for="action of tx.assetsOut">
                <div class="amount">${action.amount}</div>
                <div class="name">${action.name}</div>
              </div>
            </div>
            <div class="cell hash">
              <etherscanlink address.to-view="tx.hash" type="tx" text.to-view="tx.hash | smallHexString"></etherscanlink>
            </div>
          </template>
        </div>
      </div>
    </div>
  </div>
</template>
